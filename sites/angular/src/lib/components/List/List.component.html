<div class="list" [class.sticky]="sticky()">
  <div class="controls">
    <form>
      <label>
        Sort by:
        <select [(ngModel)]="sortOption" name="sortOption">
          @for (option of sortOptionsArray; track option[0]) {
            <option [value]="option[0]">{{ option[1] }}</option>
          }
        </select>
      </label>
      <fieldset>
        <legend>Age</legend>
        <label>
          From:
          <input type="number" [(ngModel)]="ageFrom" name="ageFrom" min="0" max="100" step="1" />
        </label>
        <label>
          To:
          <input type="number" [(ngModel)]="ageTo" name="ageTo" min="0" max="100" step="1" />
        </label>
      </fieldset>
      <fieldset class="categories">
        <legend>Categories</legend>
        @for (category of categoriesArray; track category[0]) {
          <label>
            <input
              type="checkbox"
              [checked]="isCategoryChecked(category[0])"
              (change)="toggleCategory(category[0], $any($event.target).checked)"
            />
            {{ category[1] }}
          </label>
        }
      </fieldset>
    </form>
  </div>
  <div class="data">
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Age</th>
          <th>Category</th>
        </tr>
      </thead>
      <tbody>
        @for (item of filteredList(); track item.name) {
          <tr>
            <td>{{ item.name }}</td>
            <td>{{ item.age }}</td>
            <td>{{ listCategories.get(item.category) }}</td>
          </tr>
        }
      </tbody>
    </table>
    @if (filteredList().length === 0) {
      <p class="no-data-message">No entries matched the filter settings.</p>
    }
  </div>
</div>
